‚ùå [SERVER INIT] Database initialization failed: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

‚ùå [SERVER INIT] Failed to start server: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

[POSTGRES] Initializing PostgreSQL connection pool

[POSTGRES] Database URL configured: Yes

[POSTGRES] Environment: production

[POSTGRES] PostgreSQL connection pool initialized successfully

[2025-03-09T22:11:43.683Z] [DATABASE] Database mode: PostgreSQL

[2025-03-09T22:11:43.686Z] [DATABASE] Database module initialized: Using database storage

üîµ [WIRD ROUTES] Initializing wird-routes.ts

[DATABASE] Using database storage

[WIRD ROUTER] Storage initialized successfully

üîµ [WIRD ROUTES] Registering routes:

üîµ [WIRD ROUTES] Registering POST /api/wirds/generate-suggestions route

Google OAuth Callback URL configured as: https://sahabai-production.up.railway.app/auth/google/callback

üîç [SERVER INIT] Starting server initialization...

üîç [SERVER INIT] Initialization timestamp: 2025-03-09T22:11:43.714Z

üîç [SERVER INIT] Environment: production

üîç [SERVER INIT] Initializing database...

‚ùå [SERVER INIT] Database initialization failed: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

‚ùå [SERVER INIT] Failed to start server: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

[POSTGRES] Initializing PostgreSQL connection pool

[POSTGRES] Database URL configured: Yes

[POSTGRES] Environment: production

[POSTGRES] PostgreSQL connection pool initialized successfully

[2025-03-09T22:11:43.750Z] [DATABASE] Database mode: PostgreSQL

[2025-03-09T22:11:43.753Z] [DATABASE] Database module initialized: Using database storage

üîµ [WIRD ROUTES] Initializing wird-routes.ts

[DATABASE] Using database storage

[WIRD ROUTER] Storage initialized successfully

üîµ [WIRD ROUTES] Registering routes:

üîµ [WIRD ROUTES] Registering POST /api/wirds/generate-suggestions route

Google OAuth Callback URL configured as: https://sahabai-production.up.railway.app/auth/google/callback

üîç [SERVER INIT] Starting server initialization...

üîç [SERVER INIT] Initialization timestamp: 2025-03-09T22:11:43.783Z

üîç [SERVER INIT] Environment: production

üîç [SERVER INIT] Initializing database...

‚ùå [SERVER INIT] Database initialization failed: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

‚ùå [SERVER INIT] Failed to start server: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

[POSTGRES] Initializing PostgreSQL connection pool

[POSTGRES] Database URL configured: Yes

[POSTGRES] Environment: production

> rest-express@1.0.0 deploy

> npm run start

 

npm warn config production Use `--omit=dev` instead.

 

> rest-express@1.0.0 deploy

> npm run start

 

npm warn config production Use `--omit=dev` instead.

 

> rest-express@1.0.0 deploy

> npm run start

 

npm warn config production Use `--omit=dev` instead.

npm warn config production Use `--omit=dev` instead.

 

> rest-express@1.0.0 start

> NODE_ENV=production node dist/index.js

 

 

> rest-express@1.0.0 start

> NODE_ENV=production node dist/index.js

 

npm warn config production Use `--omit=dev` instead.

 

> rest-express@1.0.0 start

> NODE_ENV=production node dist/index.js

 

[POSTGRES] Initializing PostgreSQL connection pool

[POSTGRES] Database URL configured: Yes

[POSTGRES] Environment: production

[POSTGRES] PostgreSQL connection pool initialized successfully

[2025-03-09T22:11:46.631Z] [DATABASE] Database mode: PostgreSQL

[2025-03-09T22:11:46.633Z] [DATABASE] Database module initialized: Using database storage

üîµ [WIRD ROUTES] Initializing wird-routes.ts

[DATABASE] Using database storage

[WIRD ROUTER] Storage initialized successfully

üîµ [WIRD ROUTES] Registering routes:

üîµ [WIRD ROUTES] Registering POST /api/wirds/generate-suggestions route

Google OAuth Callback URL configured as: https://sahabai-production.up.railway.app/auth/google/callback

üîç [SERVER INIT] Starting server initialization...

üîç [SERVER INIT] Initialization timestamp: 2025-03-09T22:11:46.662Z

üîç [SERVER INIT] Environment: production

üîç [SERVER INIT] Initializing database...

‚ùå [SERVER INIT] Database initialization failed: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

‚ùå [SERVER INIT] Failed to start server: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

[POSTGRES] Initializing PostgreSQL connection pool

[POSTGRES] Database URL configured: Yes

[POSTGRES] Environment: production

[POSTGRES] PostgreSQL connection pool initialized successfully

[2025-03-09T22:11:47.455Z] [DATABASE] Database mode: PostgreSQL

[2025-03-09T22:11:47.458Z] [DATABASE] Database module initialized: Using database storage    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

‚ùå [SERVER INIT] Failed to start server: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

üîç [SERVER INIT] Starting server initialization...

üîç [SERVER INIT] Initialization timestamp: 2025-03-09T22:11:40.440Z

üîç [SERVER INIT] Environment: production

üîç [SERVER INIT] Initializing database...

‚ùå [SERVER INIT] Database initialization failed: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

‚ùå [SERVER INIT] Failed to start server: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

[POSTGRES] Initializing PostgreSQL connection pool

[POSTGRES] Database URL configured: Yes

[POSTGRES] Environment: production

[POSTGRES] PostgreSQL connection pool initialized successfully

[2025-03-09T22:11:40.555Z] [DATABASE] Database mode: PostgreSQL

[2025-03-09T22:11:40.560Z] [DATABASE] Database module initialized: Using database storage

üîµ [WIRD ROUTES] Initializing wird-routes.ts

[DATABASE] Using database storage

[WIRD ROUTER] Storage initialized successfully

üîµ [WIRD ROUTES] Registering routes:

üîµ [WIRD ROUTES] Registering POST /api/wirds/generate-suggestions route

Google OAuth Callback URL configured as: https://sahabai-production.up.railway.app/auth/google/callback

üîç [SERVER INIT] Starting server initialization...

üîç [SERVER INIT] Initialization timestamp: 2025-03-09T22:11:40.611Z

üîç [SERVER INIT] Environment: production

üîç [SERVER INIT] Initializing database...

‚ùå [SERVER INIT] Database initialization failed: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

‚ùå [SERVER INIT] Failed to start server: ReferenceError: db is not defined

    at initializeDatabaseWithMigrations (file:///app/dist/index.js:5349:5)

    at startServer (file:///app/dist/index.js:5417:11)

    at file:///app/dist/index.js:5427:1

    at ModuleJob.run (node:internal/modules/esm/module_job:268:25)

    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:543:26)

    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

npm warn config production Use `--omit=dev` instead.

 